name: "python-sandbox"
description: "Execute user Python scripts"
mode: ONCE

hostname: "sandbox"
cwd: "/sandbox"
time_limit: 5

keep_env: false

# No new namespaces â€“ Docker environment doesn't allow them
clone_newnet: false
clone_newuser: false
clone_newns: false
clone_newpid: false
clone_newipc: false
clone_newuts: false
clone_newcgroup: false

# Don't use uid/gid maps when clone_newuser is false

# Resource limits (simple but effective)
rlimit_as: 512
rlimit_cpu: 5
rlimit_nofile: 64
rlimit_nproc: 64

mount_proc: false

# Writable sandbox and tmp
mount {
  src: "/sandbox"
  dst: "/sandbox"
  is_bind: true
  rw: true
}

mount {
  src: "/tmp"
  dst: "/tmp"
  is_bind: true
  rw: true
}

# Read-only system paths for Python
mount {
  src: "/dev"
  dst: "/dev"
  is_bind: true
  rw: false
}

mount {
  src: "/usr"
  dst: "/usr"
  is_bind: true
  rw: false
}

mount {
  src: "/lib"
  dst: "/lib"
  is_bind: true
  rw: false
}

mount {
  src: "/lib64"
  dst: "/lib64"
  is_bind: true
  rw: false
}

mount {
  src: "/bin"
  dst: "/bin"
  is_bind: true
  rw: false
}
